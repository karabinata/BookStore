@model BookSearchViewModel

@{
    if (!string.IsNullOrEmpty(Model.SearchText) || !string.IsNullOrEmpty(Model.SearchIn))
    {
        var searchIn = string.Empty;
        if (!string.IsNullOrEmpty(Model.SearchIn))
        {
            searchIn = Model.SearchIn == "Title" ? "заглавие" : "автор";
        }
        else
        {
            searchIn = "заглавие и автор";
        }

        ViewData["Title"] = $"Резултати за {Model.SearchText}, търсене по {searchIn}.";
    }
    else
    {
        ViewData["Title"] = $"Търсене във всички.";
    }
}

<h2>@ViewData["Title"]</h2>

@{
    var previousDisabled = Model.CurrentPage == 1 ? "disabled" : string.Empty;
    var nextDisabled = Model.CurrentPage == Model.TotalPages ? "disabled" : string.Empty;
}

<ul class="pagination">
    <li class="page-item @previousDisabled">
        <a class="page-link" asp-controller="Items" asp-action="All" asp-route-page="@Model.PreviousPage" aria-label="Previous">
            <span aria-hidden="true">«</span>
            <span class="sr-only">Previous</span>
        </a>
    </li>
    @for (int i = 1; i <= Model.TotalPages; i++)
    {
        <li class="page-item @(i == Model.CurrentPage ? "active" : string.Empty)"><a class="page-link" href="/books/items/all?page=@i">@i</a></li>
    }
    <li class="page-item @nextDisabled">
        <a class="page-link" asp-controller="Items" asp-action="All" asp-route-page="@Model.PreviousPage" aria-label="Next">
            <span aria-hidden="true">»</span>
            <span class="sr-only">Next</span>
        </a>
    </li>
</ul>

<div class="row margin-top">
    <div class="col-md-8 col-sm-8">
        <div class="table table-hover">
            @foreach (var book in Model.Books)
            {
                <a asp-controller="Items" asp-action="Details" asp-route-id="@book.Id">
                    <div class="table-row">
                        <div class="table-col">@book.CoverPicture</div>
                        <div class="table-col">@book.Title</div>
                        <div class="table-col">
                            @book.AuthorNames
                        </div>
                        <div class="table-col">@book.Price</div>
                    </div>
                </a>
            }
        </div>
    </div>
</div>

<ul class="pagination">
    <li class="page-item @previousDisabled">
        <a class="page-link @previousDisabled" href="/books/items/all?page=@Model.PreviousPage" aria-label="Previous">
            <span aria-hidden="true">«</span>
            <span class="sr-only">Previous</span>
        </a>
    </li>
    @for (int i = 1; i <= Model.TotalPages; i++)
    {
        <li class="page-item @(i == Model.CurrentPage ? "active" : string.Empty)"><a class="page-link" href="/books/items/all?page=@i">@i</a></li>
    }
    <li class="page-item @nextDisabled">
        <a class="page-link @nextDisabled" href="/books/items/all?page=@Model.NextPage" aria-label="Next">
            <span aria-hidden="true">»</span>
            <span class="sr-only">Next</span>
        </a>
    </li>
</ul>

